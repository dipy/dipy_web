{"parents": [{"link": "../../../documentation/", "title": "Documentation"}, {"link": "../../", "title": "DIPY development"}, {"link": "../", "title": "Working with DIPY source code"}, {"link": "../git_development/", "title": "Git for development"}], "prev": {"link": "../development_workflow/", "title": "Development workflow"}, "next": {"link": "../git_resources/", "title": "git resources"}, "title": "Maintainer workflow", "meta": {}, "body": "<section id=\"maintainer-workflow\">\n<span id=\"id1\"></span><h1>Maintainer workflow<a class=\"headerlink\" href=\"#maintainer-workflow\" title=\"Permalink to this heading\">\u00b6</a></h1>\n<p>This page is for maintainers \u2014 those of us who merge our own or other\npeoples\u2019 changes into the upstream repository.</p>\n<p>Being as how you\u2019re a maintainer, you are completely on top of the basic stuff\nin <a class=\"reference internal\" href=\"../development_workflow/#development-workflow\"><span class=\"std std-ref\">Development workflow</span></a>.</p>\n<p>The instructions in <a class=\"reference internal\" href=\"../set_up_fork/#linking-to-upstream\"><span class=\"std std-ref\">Linking your repository to the upstream repo</span></a> add a remote that has read-only\naccess to the upstream repo.  Being a maintainer, you\u2019ve got read-write access.</p>\n<p>It\u2019s good to have your upstream remote have a scary name, to remind you that\nit\u2019s a read-write remote:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">git</span> <span class=\"n\">remote</span> <span class=\"n\">add</span> <span class=\"n\">upstream</span><span class=\"o\">-</span><span class=\"n\">rw</span> <span class=\"n\">git</span><span class=\"nd\">@github</span><span class=\"o\">.</span><span class=\"n\">com</span><span class=\"p\">:</span><span class=\"n\">dipy</span><span class=\"o\">/</span><span class=\"n\">dipy</span><span class=\"o\">.</span><span class=\"n\">git</span>\n<span class=\"n\">git</span> <span class=\"n\">fetch</span> <span class=\"n\">upstream</span><span class=\"o\">-</span><span class=\"n\">rw</span>\n</pre></div>\n</div>\n<section id=\"integrating-changes\">\n<h2>Integrating changes<a class=\"headerlink\" href=\"#integrating-changes\" title=\"Permalink to this heading\">\u00b6</a></h2>\n<p>Let\u2019s say you have some changes that need to go into trunk\n(<code class=\"docutils literal notranslate\"><span class=\"pre\">upstream-rw/master</span></code>).</p>\n<p>The changes are in some branch that you are currently on.  For example, you are\nlooking at someone\u2019s changes like this:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">git</span> <span class=\"n\">remote</span> <span class=\"n\">add</span> <span class=\"n\">someone</span> <span class=\"n\">git</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">github</span><span class=\"o\">.</span><span class=\"n\">com</span><span class=\"o\">/</span><span class=\"n\">someone</span><span class=\"o\">/</span><span class=\"n\">dipy</span><span class=\"o\">.</span><span class=\"n\">git</span>\n<span class=\"n\">git</span> <span class=\"n\">fetch</span> <span class=\"n\">someone</span>\n<span class=\"n\">git</span> <span class=\"n\">branch</span> <span class=\"n\">cool</span><span class=\"o\">-</span><span class=\"n\">feature</span> <span class=\"o\">--</span><span class=\"n\">track</span> <span class=\"n\">someone</span><span class=\"o\">/</span><span class=\"n\">cool</span><span class=\"o\">-</span><span class=\"n\">feature</span>\n<span class=\"n\">git</span> <span class=\"n\">checkout</span> <span class=\"n\">cool</span><span class=\"o\">-</span><span class=\"n\">feature</span>\n</pre></div>\n</div>\n<p>So now you are on the branch with the changes to be incorporated upstream.  The\nrest of this section assumes you are on this branch.</p>\n<section id=\"a-few-commits\">\n<h3>A few commits<a class=\"headerlink\" href=\"#a-few-commits\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>If there are only a few commits, consider rebasing to upstream:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># Fetch upstream changes</span>\n<span class=\"n\">git</span> <span class=\"n\">fetch</span> <span class=\"n\">upstream</span><span class=\"o\">-</span><span class=\"n\">rw</span>\n<span class=\"c1\"># rebase</span>\n<span class=\"n\">git</span> <span class=\"n\">rebase</span> <span class=\"n\">upstream</span><span class=\"o\">-</span><span class=\"n\">rw</span><span class=\"o\">/</span><span class=\"n\">master</span>\n</pre></div>\n</div>\n<p>Remember that, if you do a rebase, and push that, you\u2019ll have to close any\ngithub pull requests manually, because github will not be able to detect the\nchanges have already been merged.</p>\n</section>\n<section id=\"a-long-series-of-commits\">\n<h3>A long series of commits<a class=\"headerlink\" href=\"#a-long-series-of-commits\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>If there are a longer series of related commits, consider a merge instead:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">git</span> <span class=\"n\">fetch</span> <span class=\"n\">upstream</span><span class=\"o\">-</span><span class=\"n\">rw</span>\n<span class=\"n\">git</span> <span class=\"n\">merge</span> <span class=\"o\">--</span><span class=\"n\">no</span><span class=\"o\">-</span><span class=\"n\">ff</span> <span class=\"n\">upstream</span><span class=\"o\">-</span><span class=\"n\">rw</span><span class=\"o\">/</span><span class=\"n\">master</span>\n</pre></div>\n</div>\n<p>The merge will be detected by github, and should close any related pull requests\nautomatically.</p>\n<p>Note the <code class=\"docutils literal notranslate\"><span class=\"pre\">--no-ff</span></code> above.  This forces git to make a merge commit, rather than\ndoing a fast-forward, so that these set of commits branch off trunk then rejoin\nthe main history with a merge, rather than appearing to have been made directly\non top of trunk.</p>\n</section>\n<section id=\"check-the-history\">\n<h3>Check the history<a class=\"headerlink\" href=\"#check-the-history\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<p>Now, in either case, you should check that the history is sensible and you have\nthe right commits:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">git</span> <span class=\"n\">log</span> <span class=\"o\">--</span><span class=\"n\">oneline</span> <span class=\"o\">--</span><span class=\"n\">graph</span>\n<span class=\"n\">git</span> <span class=\"n\">log</span> <span class=\"o\">-</span><span class=\"n\">p</span> <span class=\"n\">upstream</span><span class=\"o\">-</span><span class=\"n\">rw</span><span class=\"o\">/</span><span class=\"n\">master</span><span class=\"o\">..</span>\n</pre></div>\n</div>\n<p>The first line above just shows the history in a compact way, with a text\nrepresentation of the history graph. The second line shows the log of commits\nexcluding those that can be reached from trunk (<code class=\"docutils literal notranslate\"><span class=\"pre\">upstream-rw/master</span></code>), and\nincluding those that can be reached from current HEAD (implied with the <code class=\"docutils literal notranslate\"><span class=\"pre\">..</span></code>\nat the end). So, it shows the commits unique to this branch compared to trunk.\nThe <code class=\"docutils literal notranslate\"><span class=\"pre\">-p</span></code> option shows the diff for these commits in patch form.</p>\n</section>\n<section id=\"push-to-trunk\">\n<h3>Push to trunk<a class=\"headerlink\" href=\"#push-to-trunk\" title=\"Permalink to this heading\">\u00b6</a></h3>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">git</span> <span class=\"n\">push</span> <span class=\"n\">upstream</span><span class=\"o\">-</span><span class=\"n\">rw</span> <span class=\"n\">my</span><span class=\"o\">-</span><span class=\"n\">new</span><span class=\"o\">-</span><span class=\"n\">feature</span><span class=\"p\">:</span><span class=\"n\">master</span>\n</pre></div>\n</div>\n<p>This pushes the <code class=\"docutils literal notranslate\"><span class=\"pre\">my-new-feature</span></code> branch in this repository to the <code class=\"docutils literal notranslate\"><span class=\"pre\">master</span></code>\nbranch in the <code class=\"docutils literal notranslate\"><span class=\"pre\">upstream-rw</span></code> repository.</p>\n</section>\n</section>\n</section>\n", "metatags": "<meta name=\"generator\" content=\"Docutils 0.19: https://docutils.sourceforge.io/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["devel/gitwash/git_resources", "git resources", "N", "next"], ["devel/gitwash/development_workflow", "Development workflow", "P", "previous"]], "sourcename": "devel/gitwash/maintainer_workflow.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Maintainer workflow</a><ul>\n<li><a class=\"reference internal\" href=\"#integrating-changes\">Integrating changes</a><ul>\n<li><a class=\"reference internal\" href=\"#a-few-commits\">A few commits</a></li>\n<li><a class=\"reference internal\" href=\"#a-long-series-of-commits\">A long series of commits</a></li>\n<li><a class=\"reference internal\" href=\"#check-the-history\">Check the history</a></li>\n<li><a class=\"reference internal\" href=\"#push-to-trunk\">Push to trunk</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "devel/gitwash/maintainer_workflow", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}